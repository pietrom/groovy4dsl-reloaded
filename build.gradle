apply plugin: "groovy"
apply plugin: "eclipse"

sourceCompatibility = 1.7
targetCompatibility = 1.7

repositories { mavenCentral() }

dependencies {
	compile "org.codehaus.groovy:groovy-all:2.3.6"
	testCompile "org.spockframework:spock-core:0.7-groovy-2.0"
	testCompile 'xmlunit:xmlunit:1.6'
}

eclipse {
	classpath {
		containers.remove('org.eclipse.jdt.launching.JRE_CONTAINER')
		containers "org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-${targetCompatibility}"
	}
}

project.tasks.eclipse.doLast {
	File groovyPrefs = file("${project.projectDir}/.settings/org.eclipse.jdt.groovy.core.prefs")
	if (!groovyPrefs.exists()) {
		groovyPrefs.append('groovy.compiler.level=23\n')
	}
}
